ctda_give_necromancer_secret_or_trait = {
	save_temporary_scope_as = necromancer
	if = {
		limit = {
			NOR = {
				has_trait = ctda_known_necromancer
				any_secret = { secret_type = ctda_secret_necromancer }
			}	
		}
		if = {
			limit = {
				trait_is_shunned_or_criminal_in_my_or_lieges_faith_trigger = { TRAIT = ctda_known_necromancer GENDER_CHARACTER = scope:necromancer }
			}
			add_secret = {
				type = ctda_secret_necromancer
			}
		}
		else = {
			add_trait = ctda_known_necromancer
		}
	}	
}