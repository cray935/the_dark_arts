ctda_secret_necromancer = {
	category = ctda_necromancy
	is_valid = {
		secret_owner = {
			NOT = {
				has_trait = ctda_known_necromancer
			}
		}
	}
	is_shunned = {
		secret_owner = {
			OR = {
				faith = {
					has_doctrine_parameter = ctda_necromancy_shunned
				}
				any_liege_or_above = {
					faith = {
						has_doctrine_parameter = ctda_necromancy_shunned
					}
				}
			}
		}
	}

	is_criminal = {
		secret_owner = {
			OR = {
				faith = {
					has_doctrine_parameter = ctda_necromancy_illegal
				}
				any_liege_or_above = {
					faith = {
						has_doctrine_parameter = ctda_necromancy_illegal
					}
				}
			}
		}
	}

	
	on_expose = {
		save_scope_as = secret
		
		secret_exposed_notification_effect = yes

		scope:secret_owner = {
			if = {
				limit = {
					NOT = {
						this = scope:secret_exposer
					}
				}
				save_scope_as = owner
				trigger_event = ctda_necromancer_secrets_events.1
			}
		}
	}
}