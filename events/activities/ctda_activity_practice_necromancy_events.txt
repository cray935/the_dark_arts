namespace = ctda_activity_practice_necromancy_events

ctda_activity_practice_necromancy_events.1 = {
	type = character_event
	title = ctda_activity_practice_necromancy_events.1.t
	desc = ctda_activity_practice_necromancy_events.1.desc
	theme = witchcraft
	override_background = {
		event_background = corridor
	}
	right_portrait = root

	# Study corpses
	option = {
		name = ctda_activity_practice_necromancy_events.1.a
		
		random_list = {
			1 = {
				modifier = {
					factor = ctda_necromancer_novice_success_chance
				}
				trigger_event = {
					id = ctda_activity_practice_necromancy_events.2
					days = 3
				}
			}
			1 = {
				modifier = {
					factor = ctda_necromancer_novice_fail_chance
				}
				trigger_event = {
					id = ctda_activity_practice_necromancy_events.3
					days = 3
				}
			}
		}
	}

	# Prepare corpse
	option = {
		name = ctda_activity_practice_necromancy_events.1.b
		# TODO: implement duel, novice
	}

	# Find grimoire
	option = {
		name = ctda_activity_practice_necromancy_events.1.c
		trigger = {
			is_necromancer_apprentice = yes
		}
		# TODO: implement duel, apprentice
	}

	# Study grimoire
	option = {
		name = ctda_activity_practice_necromancy_events.1.d
		trigger = {
			is_necromancer_apprentice = yes
		}
		# TODO: implement duel, apprentice
	}

	# Raise corpse
	option = {
		name = ctda_activity_practice_necromancy_events.1.e
		trigger = {
			is_necromancer_adept = yes
		}
		# TODO: implement duel, adept
	}
}

# Study corpses success
ctda_activity_practice_necromancy_events.2 = {
	type = character_event
	title = ctda_activity_practice_necromancy_events.2.t
	desc = ctda_activity_practice_necromancy_events.2.desc
	theme = witchcraft
	override_background = {
		event_background = corridor
	}
	right_portrait = root

	option = {
		name = ctda_activity_practice_necromancy_events.2.a
		add_ctda_necromancer_lifestyle_xp = 300
	}
}

# Study corpses fail
ctda_activity_practice_necromancy_events.3 = {
	type = character_event
	title = ctda_activity_practice_necromancy_events.3.t
	desc = ctda_activity_practice_necromancy_events.3.desc
	theme = witchcraft
	override_background = {
		event_background = corridor
	}
	right_portrait = root

	option = {
		name = ctda_activity_practice_necromancy_events.3.a
	}
}

# End the activity
ctda_activity_practice_necromancy_events.100 = {
	type = character_event
	
	after = {
		if = {
			limit = {
				exists = scope:activity
			}
			scope:activity = {
				complete_activity = yes
			}
		}
	}
}